%%% School of Mathematics preamble for HTML course notes with BookML.
%%% Adapted directly from https://github.com/vlmantova/bookml/tree/main/template

%%% This template imports all the most commonly requested packages which have been
%%% tested and are compatible with BookML. You can comment out any \usepackage
%%% commands that you are not using in your document.

%%% You should import extra packages, define custom macros and environments,
%%% etc in preamble/custom.tex.


%% BookML and template settings

%%% RECOMMENDED
% better accented letters and ligatures in PDF
\usepackage[T1]{fontenc}
% set language of outputs
\usepackage[british]{babel}
% PDF hyperlinks and metadata
\usepackage[pdfusetitle]{hyperref}
% higher quality variant of Computer Modern
%\usepackage{lmodern}

%%% REQUIRED for correct formatting and tagging of BookML output: title and author
\title{\coursename}
\author{\courseauthor}
\date{\courseyear}

%%% OPTIONAL but highly recommended
% additional BookML and LaTeXML functionality
\usepackage{bookml/bookml}
% additional versions of the document (e.g. large print) for inclusion in the HTML output
\bmlAltFormat{\jobname.pdf}{PDF (sans serif)} % this version is always included unless it's given an empty name
\bmlAltFormat{\jobname-serif.pdf}{PDF (serif)}
% simple way of generating a large print PDF (~19% bigger) without changing pagination


% short text description used for PDF and SCORM metadata
\hypersetup{pdfsubject={\coursedescription}}

% Provide \alttext (easier to remember)
\providecommand\alttext{\bmlDescription}

%%% REQUIRED for TikZ: use bmlImageEnvironment for TikZ and other images, since
%%%                    LaTeXML is slow and often produces garbled TikZ output
%%%                    (this requires \usepackage{bookml/bookml})
% tell BookML to compile tikzpicture and tikzcd environments into images via LaTeX
\bmlImageEnvironment{tikzpicture}


\iflatexml          % are we compiling HTML through LaTeXML?
    
\else               % are we compiling the PDF?
    
\fi

\usepackage{pgfplots}  % this also loads TikZ
\usepackage[all]{xy}

%% Packages

% Font-related
\usepackage{amsmath,amsfonts,amssymb,amsthm}
\usepackage{bm}
\usepackage[normalem]{ulem}

% Bibliography: note that only natbib is compatible at present
\usepackage[square,sort,comma,numbers]{natbib} %\usepackage{natbib}

% Images (note that TikZ and vector graphics/diagrams packages
% are imported in the previous section)
\usepackage{xcolor}
\usepackage{graphicx}
%\usepackage{svg}

% Monospaced output (code listings, URLs...)
\usepackage{verbatim}
\usepackage{listings}
\usepackage{xurl}

% Figures, floats, page layout
\usepackage{subcaption} % use this rather than subfig
\usepackage{wrapfig} % pushes entire paragraph to the side in HTML version
\usepackage{lscape} % does nothing in the HTML version
\usepackage{fancybox}
\usepackage{rotating}
\usepackage{multicol}

% Tables
\usepackage{array}
\usepackage{tabularx}

% Automation
\usepackage{multido}

% Lists
\usepackage{enumitem}

\iflatexml
    % HTML-only packages, if any (will not be used in the PDF output)
    \pgfplotsset{compat=1.16}
\else
    % PDF-only packages (will not be used in the HTML output)
    \usepackage[a4paper, left=25mm, right=25mm, top=30mm, bottom=30mm]{geometry}
    \usepackage[document]{ragged2e} % Ragged right text for increased accessibility
    \makeatletter\AddToHook{cmd/mdf@lrbox/after}{\RaggedRight\sloppy}\makeatother
    \usepackage{parskip} % Removes paragraph indenting and adds skip
    \ifdefined \choosefonts
    \else
        \usepackage{cmbright,eulervm} % Some more accessibility-friendly fonts
        \usepackage[bb=fourier]{mathalpha}
        \renewcommand{\mathbf}{\mathbold} % Fix \mathbf font when using eulervm
    \fi
    \usepackage{tcolorbox}
    \usepackage{fancyhdr}
    \usepackage{etoolbox}
\fi



%% Macros and environments

% Set the name of the image/graphics folder(s)
\newcommand{\img}{img}
